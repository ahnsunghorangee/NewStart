# 스프링 컨테이너

### 스프링 컨테이너란?

- 스프링의 빈을 생성하고 관리하는 컨테이너
- 인스턴스 생명주기 관리 + 생성된 인스턴스들에게 추가적인 기능을 제공
  - 알아서 객체의 생성과 소멸을 컨트롤

- IoC나 AOP에 대해서 관리한다.
- 스프링 프레임워크 핵심부에 위치하며, 종속 객체 주입을 이용하여 어플리케이션을 구성하는 컴포넌트들을 관리
  - 컨테이너 마음대로 객체를 생성하는 것이 아니라 **프로그램을 이용하는 이용자의 호출에 의해 컨테이너가 동작하는 구조**



### 스프링 컨테이너의 종류

1. Bean Factory
   - 스프링 설정파일에 등록된 Bean 객체를 생성하고 관리하는 기본적인 기능만 제공
   - 컨테이너가 구동될 때, Bean 객체를 생성하는 것이 아니라, 클라이언트의 요청에 의해서 Bean 객체가 사용되는 시점(Lazy Loading)에 객체를 생성하는 방식
   - ApplicationContext는 BeanFactory를 상속받고 있다.
2. Application Context
   - Bean 객체를 생성하고 관리하는 기능
   - 뿐만 아니라, 트랜잭션 관리, 메시지 기반의 다국어 처리, AOP 처리 등 DI와 IoC 외에도 많은 부분 지원
   - 컨테이너가 구동되는 시점에 객체들을 생성하는 **Pre-Loading** 방식



### IoC(Inversion of Control, 제어의 역전)란?

- 제어의 역전, 즉 외부에서 제어를 한다는 것

- IoC는 컨테이너이다.

  - 객체 생성을 책임지고, 의존성을 관리한다.
  - POJO의 생성, 초기화, 서비스, 소멸에 대한 권한을 가진다.

- 컴포넌트 의존관계 설정(Component dependency resolution), 설정(Configuration) 및 생명주기(LifeCycle)를 해결하기 위한 디자인 패턴

  - 기존 자바 기반의 어플리케이션을 개발할 때 자바 객체를 생성하고 서로간의 의존관계를 연결시키는 작업에 대한 제어권은 보통 개발되는 어플리케이션에 있었다.

- IoC에서 말하는 제어의 역전이란

  - **인스턴스 생성부터 생명주기의 관리까지 모든 객체에 대한 제어권이 바뀌었다는 것(IoC 컨테이너)**이다.
  - 제어권: **어플리케이션에서 컨테이너가 전담**

  

### 자바 빈 vs 스프링 빈

자바 빈? 데이터를 표현하는 것을 목적으로 하는 자바 클래스, 컴포넌트와 비슷한 의미

- 필드, getter, setter, 생성자, 메서드 등 포함

스프링 빈? 스프링이 제어권을 가지고 직접 만들과 관계를 부여하는 오브젝트



### DI(Dependency Injection)란?

- 의존 관계 주입 기능으로, 객체를 직접 생성하는 것이 아니라 **외부에서 생성한 후 주입시켜주는 방식**
- 모듈 간의 결합도가 낮아지고 유연성이 높아진다.

<center>
    <img src="https://media.vlpt.us/images/gillog/post/08489bda-549e-4dae-851b-8ae1734bf85e/21373937580AEF9B37.jpg"/>
</center>

- 방법1) new 생성자를 통해 A 객체가 B, C 객체 생성
- 방법2) 외부에서 생성된 객체를 setter를 통해 사용





<center>
    <img src="https://media.vlpt.us/images/gillog/post/41f2eb24-fce2-4b7e-b9ac-d5c3ce97d213/22535642580C4AF12C.jpg"/>
</center>



- 스프링에서는 객체를 Bean이라고 부르며, 프로젝트가 실행될 때, 사용자가 Bean으로 관리하는 객체들의 생성과 소멸에 관련된 작업을 자동적으로 수행해주는데
- 객체가 생성되는 곳을 스프링에서는 Bean 컨테이너라고 부른다.





# ※ 정리

**객체가 만들어지는 순서**

1. **객체 생성**
2. **의존성 객체 주입**
   - **스스로 만드는 것이 아니라 제어권을 스프링에게 위임하여 스프링이 만들어 놓은 객체를 주입**
3. **의존석 객체 메서드 호출**



- **스프링이 모든 의존석 객체를 스프링이 실행될 때 다 만들어주고,** 
- **필요한 곳에 주입시켜줌으로써**
- **Bean들은 싱글턴 패턴의 특징을 가지며**
- **제어의 흐름을 사용자가 컨트롤 하는 것이 아니라**
- **스프링에게 맡겨 작업을 처리하게 된다.**

